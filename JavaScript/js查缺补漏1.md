# è¯¦ç»†æè¿°JavaScriptçš„æ•°æ®ç±»å‹ï¼Ÿ

åŸºæœ¬æ•°æ®ç±»å‹ï¼š```undefined```,```null```,```number```,```boolean```.```string```,```Symbol```

å¼•ç”¨æ•°æ®ç±»å‹ï¼š```object```

``` NaN```ä¹Ÿå±äº```number```ç±»å‹ï¼Œä½†æ˜¯```NaN```ä¸ç­‰äºè‡ªèº«

# Typeofæ“ä½œç¬¦
```typeof```å¯¹äºåŸºæœ¬ç±»å‹è€Œè¨€ï¼Œé™¤äº†```null```ä»¥å¤–ï¼Œéƒ½èƒ½æ­£ç¡®çš„æ˜¾ç¤ºç±»å‹ï¼Œå¯¹``` typeof null```ä¼šè¿”å›```object```ï¼Œå¯ä»¥ç†è§£ä¸º```null```æ˜¯ç©ºå¯¹è±¡çš„å¼•
ç”¨,```typeof```å¯¹äºå¼•ç”¨ç±»å‹è€Œè¨€ï¼Œé™¤äº†å‡½æ•°ä¼šæ˜¾ç¤º```function```ä»¥å¤–ï¼Œéƒ½ä¼šæ˜¾ç¤º```object```ï¼Œåœ¨æŸäº›æµè§ˆå™¨ç‰ˆæœ¬ä¹‹å‰ï¼Œ``` typeof Regxp```ä¼šè¿”å›```fun
ction```ã€‚

è‹¥æƒ³æ­£ç¡®çš„åˆ¤æ–­ä¸€ä¸ªå˜é‡çš„ç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨```Object.prototype.toString.call(x)```,å¯ä»¥å¾—åˆ°ä¸€ä¸ªç±»ä¼¼```[object type]```çš„å­—ç¬¦ä¸²ã€‚

# ç±»å‹è½¬æ¢
### è½¬```Boolean```

å¯¹äº```Boolean()```æ¥è¯´ï¼Œé™¤äº†```null``` , ```undefined``` , ```0ï¼ˆåŒ…æ‹¬-0ï¼‰``` , ```ç©ºå­—ç¬¦ä¸²``` , ```NaN``` , ```false``` ä»¥å¤–ï¼Œå…¶ä½™çš„éƒ½ä¼šè¿”å›
```true```,åŒ…æ‹¬æ‰€æœ‰çš„å¯¹è±¡ã€‚

### å¯¹è±¡è½¬åŸºæœ¬ç±»å‹

å¯¹è±¡è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹æ—¶ï¼Œé¦–å…ˆè¦è°ƒç”¨```valueof()```ï¼Œç„¶åè°ƒç”¨```toString()```

### åŠ å·è¿ç®—ç¬¦

åªè¦æœ‰ä¸€æ–¹ä¸ºå­—ç¬¦ä¸²ï¼Œå¦ä¸€æ–¹ä¹Ÿä¼šè½¬æ¢ä¸ºå­—ç¬¦ä¸²ï¼Œåªè¦æœ‰ä¸€æ–¹æ˜¯æ•°å­—ï¼Œå¦å¤–ä¸€æ–¹ä¼šè½¬æ¢ä¸ºæ•°å­—

```
1 + "1"    //"11"

"a" + + "b" //"aNaN" å› ä¸º + "b"æ˜¯NaN,å†åŠ aå°±æ˜¯aNaN
```

# ``` == ```è¿ç®—ç¬¦

```undefined == null ``` è¿”å›true

``` NaN == NaN ``` è¿”å›false,NaNä¸å’Œä»»ä½•å€¼ç›¸åŒ

``` [] == ![] ```åœ¨æœ‰ä¸€æ–¹ä¸º``` Boolean```çš„æƒ…å†µä¸‹ï¼Œä¼šå°†å…¶éƒ½è½¬æ¢ä¸ºæ•°å­—åœ¨è¿›è¡Œæ¯”è¾ƒ

1. ![]ä¸ºfalseï¼Œé‚£ä¹ˆè¡¨è¾¾å¼å˜ä¸º ``` [] == false ```ï¼Œè€Œæ ¹æ®è§„åˆ™ï¼Œä¼šå°†å…¶è½¬æ¢ä¸ºæ•°å­—ï¼Œäºæ˜¯ ``` [] == 0 ```ã€‚

2. å°†[]è½¬æ¢ä¸ºåŸºæœ¬ç±»å‹å†ä¸0è¿›è¡Œæ¯”è¾ƒ

``` [].toString()```è½¬æ¢ä¸º``` " " ```ï¼Œè¡¨è¾¾å¼å˜ä¸º ``` "" == 0 ```ã€‚

3.```""```ä¼šè¢«è½¬æ¢ä¸º 0ï¼Œæ‰€ä»¥è¿”å›```true```

# ```new```æ“ä½œç¬¦

åœ¨æ„é€ å‡½æ•°ä¸­ï¼Œå¦‚æœæ˜¾ç¤ºçš„è¿”å›ä¸€ä¸ªåŸºæœ¬ç±»å‹çš„å€¼ï¼Œæ„é€ å‡½æ•°çš„è¿”å›å€¼ä¸ä¼šå—åˆ°å½±å“ï¼Œä»ç„¶ä¼šè¿”å›å¯¹è±¡å®ä¾‹ï¼Œå¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ï¼Œé‚£ä¹ˆå°±å°†è¯¥å¯¹è±¡æ­£å¸¸è¿”å›
1. æ–°ç”Ÿæˆäº†ä¸€ä¸ªå¯¹è±¡

2. æ‰§è¡ŒåŸå‹é“¾æ¥

3. å°†è¯¥å¯¹è±¡ç»‘å®šåˆ°thisä¸Š

4. æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¦‚æœè¿”å›çš„æ˜¯åŸå§‹å€¼åˆ™å°†å…¶å¿½ç•¥ï¼Œå¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™éœ€è¦å°†å…¶æ­£å¸¸å¤„ç†

```
 function create(foo, ...reset){
     //1.åˆ›å»ºç©ºå¯¹è±¡
     let obj = new Object();
     //2.é“¾æ¥åŸå‹ï¼Œè¦è®©æ–°åˆ›å»ºçš„è¿™ä¸ªå¯¹è±¡çš„åŸå‹å˜ä¸ºPerson.prototype
     Object.setPrototypeOf(obj,foo.prototype);
     //3.å°†è¯¥å¯¹è±¡ç»‘å®šåˆ°æ„é€ å‡½æ•°çš„thisä¸Šå¹¶ä¼ å…¥å‚æ•°
     let result = foo.apply(obj,reset);
     //4.applyå°±å·²ç»æ‰§è¡Œäº†æ„é€ å‡½æ•°ï¼Œè¿”å›ç»“æœæ—¶è¦åˆ¤æ–­æ‰§è¡Œæ„é€ å‡½æ•°ä¼šè¿”å›ä»€ä¹ˆï¼Œå¦‚æœè¿”å›çš„æ˜¯åŸå§‹å€¼éœ€è¦å°†å…¶å¿½ç•¥ï¼Œè¿”å›æ–°åˆ›å»ºçš„å¯¹è±¡ï¼Œå¦‚æœè¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™éœ€è¦å°†å…¶ç»“æœè¿”å›
     return typeof result === "object" ? result : obj

 }

 function Person(name,age){
     this.name = name;
     this.age = age;
 }

 const me = create(Person,"å¼ ç››");
console.log(me);
```

# instanceof 

``` instanceof ```æŸ¥æ‰¾çš„åŸç†æ˜¯æ ¹æ®ï¼šåˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯ä¸æ˜¯èƒ½æ‰¾åˆ°è¯¥ç±»å‹ï¼Œinstanceofä¸èƒ½ç”¨æ¥åˆ¤æ–­åŸºæœ¬æ•°æ®ç±»å‹çš„ï¼Œå› ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼Œ
å¹¶ä¸”åœ¨jsä¸­æ‰€æœ‰çš„å¯¹è±¡éƒ½ä¼šä»Objectä¸­ç»§æ‰¿å±æ€§ï¼Œæ‰€ä»¥å¯¹ä¸€ä¸ªå¯¹è±¡```instanceof Object```æ°¸è¿œè¿”å›```true```ã€‚
```
let arr = [1, 2, 3, 4];

//åœ¨arrçš„åŸå‹é“¾ä¸ŠæŸ¥æ‰¾Arrayç±»å‹
console.log(arr instanceof Array);
```

æ‰‹åŠ¨å®ç°instanceofï¼Œæ€è·¯æ˜¯å»æŸ¥æ‰¾å³è¾¹å˜é‡çš„prototypeå±æ€§æ˜¯å¦åœ¨å·¦è¾¹å˜é‡çš„åŸå‹é“¾ä¸Šå³å¯
```
let arr = [1, 2, 3, 4];
function instan(left,right) {
    let right_prototype = right.prototype;
    left = left.__proto__;
    while (true) {
        //å½“æŸ¥æ‰¾åˆ°åŸå‹é“¾çš„é¡¶ç«¯å³,Object.prototype.__proto__,ä¹Ÿå°±æ˜¯Nullæ—¶,æŸ¥æ‰¾ç»“æŸ
        if(left === null){
            return false
            
        }
        if(right_prototype === left){
            return true;
        }
        left == left.__proto__;
    }
}
```
# ä»¤æˆ‘è¿™ä¸ªè‡ªå­¦åŠå¹´çš„å‰ç«¯å¤§å­¦ç”Ÿæ„Ÿåˆ°å´©æºƒçš„thiså…¨è§£

this:æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼ŒæŒ‡å‘è°ƒç”¨å‡½æ•°çš„å¯¹è±¡ã€‚

å…³äºthisçš„ç»‘å®šè§„åˆ™æœ‰å››ç§ï¼š

1. é»˜è®¤ç»‘å®š
2. éšå£«ç»‘å®š
3. ç¡¬ç»‘å®š
4. newç»‘å®š

### é»˜è®¤ç»‘å®š

ç‹¬ç«‹è°ƒç”¨å‡½æ•°æ—¶ï¼Œeg:
```
var name ="äºŒç‹—";
function getName(){
    return this.name;   //window
}
getName();   //å‡½æ•°getName()è¢«å…¨å±€å¯¹è±¡è°ƒç”¨ï¼Œæ‰€ä»¥thisæŒ‡å‘å…¨å±€å¯¹è±¡ï¼Œéä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ºwindowï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹ä¸ºundefined,undefinedä¸Šæ²¡æœ‰thiså¯¹è±¡ï¼ŒæŠ¥é”™
```

å½“ä½¿ç”¨letå®šä¹‰nameæ—¶ï¼Œå› ä¸ºletå®šä¹‰çš„å˜é‡ä¸å†ä½œä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§ï¼Œæ‰€ä»¥æŸ¥ä¸åˆ°ã€‚

### éšå¼ç»‘å®š

å‡½æ•°çš„è°ƒç”¨æ˜¯åœ¨æŸä¸ªå¯¹è±¡ä¸Šè§¦å‘çš„ï¼Œå…¸å‹çš„å½¢å¼ä¸ºobj.fun()ï¼Œè¿™ç§æ—¶å€™ï¼ŒthisæŒ‡å‘obj
```
function getName() {
    return `hello ${this.name}`;
}
var name = "å…¨å±€name";
var person ={
    name: "personå¯¹è±¡çš„Name",
    sayName: getName
}
//åœ¨å…¨å±€ç¯å¢ƒä¸Šè°ƒç”¨getName()æ–¹æ³•
console.log(getName()); //hello å…¨å±€name
//åœ¨å¯¹è±¡personä¸Šè°ƒç”¨getName()æ–¹æ³•
console.log(person.sayName()); //hello personå¯¹è±¡çš„name
```
ä½†æ˜¯è¿™ç§æ–¹å¼åªæœ‰æœ€åä¸€å±‚ä¼šå½±å“åˆ°è°ƒç”¨çš„ä½ç½®
```
function sayHi(){
    console.log('Hello,', this.name);
}
var person2 = {
    name: 'person2ä¸Šçš„Name',
    sayHi: sayHi
}
var person1 = {
    name: 'person1ä¸Šçš„name',
    friend: person2
}
person1.friend.sayHi(); //friendå±æ€§æ˜¯person2å¯¹è±¡ï¼Œç›¸å½“äº person1.friend.person2.sayHi(),åªå…³æ³¨æœ€åä¸€å±‚ï¼Œæ‰€ä»¥ç»“æœä¸ºperson2ä¸Šçš„Name

```
ç»‘å®šä¸¢å¤±ï¼š
```
function sayHi(){
    console.log('Hello,', this.name);
}
var person2 = {
    name: 'person2ä¸Šçš„Name',
    sayHi: sayHi
}
var name ="å…¨å±€ä¸Šçš„Name";
var foo = person2.sayHi;
foo();
```
è¿™é‡Œç›´æ¥å°†fooæŒ‡å‘äº†person2å¯¹è±¡çš„sayHi()å‡½æ•°ï¼Œæ­¤æ—¶çš„å˜é‡foo = sayHi(){ console.log('Hello',this.name)}ï¼Œéšååˆåœ¨å…¨å±€ç¯å¢ƒä¸­è¢«è°ƒç”¨

ç¬¬äºŒç§ç»‘å®šä¸¢å¤±å‘ç”Ÿåœ¨å›è°ƒå‡½æ•°ä¸Š
```
function sayHi(){
    console.log('Hello,', this.name);
}
var person1 = {
    name: 'YvetteLau',
    sayHi: function(){
        setTimeout(function(){
            console.log('Hello,',this.name);
        })
    }
}
var person2 = {
    name: 'Christina',
    sayHi: sayHi
}
var name='Wiliam';
person1.sayHi();
setTimeout(person2.sayHi,100);
setTimeout(function(){
    person2.sayHi();
},200);

```
ç»“æœä¸ºï¼š
```
Hello, Wiliam
Hello, Wiliam
Hello, Christina
```
åˆ†æè¿‡ç¨‹ï¼š
ç¬¬ä¸€ä¸ªè¾“å‡ºï¼šåœ¨setTimeout()ä¸­æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œå¯ä»¥å°†è¯¥å‡½æ•°å•ç‹¬æ‹¿å‡ºæ¥ï¼Œå®ƒå…¶å®æ˜¯åœ¨å…¨å±€ç¯å¢ƒä¸­è¿è¡Œçš„ã€‚

ç¬¬äºŒä¸ªè¾“å‡ºï¼šsetTimeout(person2.sayHi,100);è¿™é‡Œå…¶å®æ˜¯åœ¨å°†person2.sayHiä½œä¸ºä¸€ä¸ªå‚æ•°ç»™setTimeout,è€ŒsetTimeoutæ‰§è¡Œäº†å›è°ƒå‡½æ•°åï¼Œperson2.sayHi()
ä¸­çš„thiså·²ç»ä¸person2æ²¡æœ‰å…³ç³»äº†ï¼Œä¹Ÿå¯ä»¥å°†è¯¥è¯­å¥å˜ä¸º:
```
setTimeout(function(){
  console.log('Hello,', this.name);
},100)
```
å…¶å®ä¸ç¬¬ä¸€ä¸ªè¾“å‡ºæ²¡æœ‰åŒºåˆ«

ç¬¬ä¸‰ä¸ªè¾“å‡ºï¼š
```
setTimeout(function(){
    person2.sayHi(); //è¿™é‡Œç›´æ¥æ‰§è¡Œäº†å‡½æ•°
},200);
```

å…¶å®å¯ä»¥ç†è§£ä¸ºï¼šç¬¬ä¸‰ä¸ªè¾“å‡ºä¸­ç›´æ¥æ‰§è¡Œäº†å‡½æ•°ï¼Œè€Œç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªä¸­åªæ˜¯æŒ‡å‘äº†å¼•ç”¨ï¼Œå¹¶æ²¡æœ‰è°ƒç”¨ï¼Œè°ƒç”¨ä»–ä»¬çš„å…¶å®æ˜¯å…¨å±€ç¯å¢ƒã€‚

### æ˜¾å¼ç»‘å®š

å…¶å®å°±æ˜¯é€šè¿‡Javascriptçš„```apply```,```call```,```bind```æ˜¾ç¤ºçš„æŒ‡å®šthisæ‰€æŒ‡å‘çš„å¯¹è±¡ï¼Œä»–ä»¬çš„ç¬¬ä¸€ä¸ªå‚æ•°å°±æ˜¯thisæ‰€è¦æŒ‡å‘çš„å¯¹è±¡ï¼Œcallå’Œapplyçš„ä½œç”¨ä¸€æ ·ï¼Œåªæ˜¯åœ¨ä¼ å‚è¿‡ç¨‹ä¸­:applyæ¥æ”¶çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œè€Œcallæ¥æ”¶çš„æ˜¯ä¸€ä¸ªä¸€ä¸ªçš„å‚æ•°,åŒæ—¶callå’Œapplyéƒ½ä¼šæ‰§è¡Œå‡½æ•°ï¼Œä½†æ˜¯bindä¸ä¼šã€‚ä½†æ˜¯å½“æˆ‘ä»¬å°†```null```æˆ–è€…```undefined```ä½œä¸ºå‚æ•°ä¼ å…¥```apply```,```call```,```bind```æ—¶ï¼Œè¿™äº›å€¼å°†è¢«å¿½ç•¥ï¼Œå®é™…ä¸Šåº”ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šè§„åˆ™

ç»‘å®šä¸¢å¤±çš„åˆä¸€ä¸ªä¾‹å­ï¼š
```
function sayHi(){
    console.log('Hello,', this.name);
}
var person = {
    name: 'YvetteLau',
    sayHi: sayHi
}
var name = 'Wiliam';
var Hi = function(fn) {
    fn();
}
Hi.call(person, person.sayHi); 
```
åœ¨æœ€åä¸€æ­¥å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡callå°†Hiè¿™ä¸ªå‡½æ•°ä¸­çš„thisæŒ‡å‘æ˜ç¡®çš„ç»‘å®šåˆ°äº†personå¯¹è±¡ä¸Šå¹¶ä¸”å°†person.sayHiä½œä¸ºå‚æ•°ä¼ è¿›å»ï¼Œç„¶è€Œå¯ä»¥æ¥çœ‹ä¸€ä¸‹æ­¤æ—¶Hiå‡½æ•°ï¼š
```
var Hi = function(fn){
//è¿™é‡Œå¯ä»¥æ‰“å°ä¸‹è¿™é‡Œçš„thisæ›´ç›´è§‚:
  console.log(this);    //personå¯¹è±¡
 ï¼ï¼è¿™é‡Œç›´æ¥æ‰§è¡Œäº†fn()å‡½æ•°ï¼ŒåŒæ—¶ç”±äºperson.sayHiå·²ç»è¢«èµ‹å€¼ç»™äº†fnè¿™ä¸ªå˜é‡ï¼Œæ‰€ä»¥éšå¼ç»‘å®šä¸¢å¤±äº†ï¼Œæ‰€ä»¥ä¸ºé»˜è®¤ç»‘å®š
 fn()
}

```

### newç»‘å®š

å½“æˆ‘ä»¬ä½¿ç”¨newæ¥è°ƒç”¨å‡½æ•°æ—¶ï¼Œå°±ä¼šæŠŠnewåˆ›å»ºçš„æ–°å¯¹è±¡ç»‘å®šåˆ°è¿™ä¸ªå‡½æ•°çš„thisä¸Šï¼Œå‰ææ˜¯æ„é€ å‡½æ•°æ²¡æœ‰è¿”å›å¯¹è±¡æˆ–è€…functionï¼Œå¦åˆ™thiså°±æŒ‡å‘è¿”å›çš„è¿™ä¸ªå¯¹è±¡æˆ–function

### ç»‘å®šä¼˜å…ˆçº§ï¼šnewç»‘å®š>æ˜¾å¼ç»‘å®š>éšå¼ç»‘å®š>é»˜è®¤ç»‘å®š

### ç®­å¤´å‡½æ•°

ç®­å¤´å‡½æ•°æ²¡æœ‰è‡ªå·±çš„thisï¼Œå®ƒçš„thisç»§æ‰¿äºå¤–å±‚ä¸­çš„this

```
var obj = {
    hi: function(){
        console.log(this);
        return ()=>{
            console.log(this);
        }
    },
    sayHi: function(){
        return function() {
            console.log(this);
            return ()=>{
                console.log(this);
            }
        }
    },
    say: ()=>{
        console.log(this);
    }
}
let hi = obj.hi();  //è¾“å‡ºobjå¯¹è±¡
hi();               //è¾“å‡ºobjå¯¹è±¡
let sayHi = obj.sayHi();
let fun1 = sayHi(); //è¾“å‡ºwindow
fun1();             //è¾“å‡ºwindow
obj.say();          //è¾“å‡ºwindow

```
é€æ­¥åˆ†æï¼š
1. let hi = obj.hi();å°†objå¯¹è±¡çš„hiæ–¹æ³•çš„æ‰§è¡Œç»“æœèµ‹å€¼ç»™å˜é‡hiï¼Œåœ¨æ‰§è¡Œæ—¶,hiæ–¹æ³•ä¸­çš„thisç”±äºéšå¼ç»‘å®šï¼ŒæŒ‡å‘çš„æ˜¯obj

2. hi();hiå˜é‡æ­¤æ—¶æ˜¯obj.hi()çš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯ç®­å¤´å‡½æ•°ï¼Œè€Œç®­å¤´å‡½æ•°çš„thisç»§æ‰¿çš„æ˜¯ä¸Šä¸€ä¸ªä»£ç åº“ä¸­çš„this,ä¹Ÿå°±æ˜¯objï¼Œæ‰€ä»¥è¾“å‡ºobj

3. let sayHi = obj.sayHi(); å°†objå¯¹è±¡çš„sayHi()æ–¹æ³•çš„æ‰§è¡Œç»“æœèµ‹å€¼ç»™å˜é‡sayHi

4. å°†sayHiçš„è¿”å›å€¼èµ‹å€¼ç»™fun1å˜é‡ï¼Œè€Œåœ¨sayHi()å‡½æ•°æ‰§è¡Œçš„æ˜¯æ—¶å€™ï¼Œå…¶ä¸­çš„thisç”±äºé»˜è®¤ç»‘å®šï¼ŒæŒ‡å‘äº†å…¨å±€ç¯å¢ƒï¼Œå› ä¸ºå®ƒæ˜¯åœ¨å…¨å±€ç¯å¢ƒä¸­è¢«è°ƒç”¨çš„ã€‚
æ­¤æ—¶çš„ï¼š
```
sayHi = function(){
 console.log(this);
 return ()=>{
  console.log(this);
 }
}
```
5. å°†sayHiçš„è¿”å›å€¼èµ‹å€¼ç»™fun1å˜é‡ï¼Œæ­¤æ—¶çš„
```
fun1 = () =>{
 console.log(this)
}
```
ç”±äºç®­å¤´å‡½æ•°ä¸­çš„thisç»§æ‰¿äºä¸Šä¸€ä¸ªå¤–å±‚ä»£ç åº“çš„this,æ‰€ä»¥æ‰§è¡Œfun1()ä¼šè¾“å‡ºwindow

6. obj.say()ï¼šè°ƒç”¨objçš„say()æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼ŒæŒ‡å‘å¤–å±‚ï¼Œæ‰€ä»¥è¾“å‡ºwindow

##### å†æ¥ä¸€ä¸ªä¾‹å­
```
var obj = {
    hi: function(){
        console.log(this);
        return ()=>{
            console.log(this);
        }
    },
    sayHi: function(){
        return function() {
            console.log(this);
            return ()=>{
                console.log(this);
            }
        }
    },
    say: ()=>{
        console.log(this);
    }
}
let sayHi = obj.sayHi();
let fun1 = sayHi(); //è¾“å‡ºwindow
fun1();             //è¾“å‡ºwindow

let fun2 = sayHi.bind(obj)();//è¾“å‡ºobj
fun2();                      //è¾“å‡ºobj
```
é€è¡Œåˆ†æï¼š

1.let sayHi = obj.sayHi(); æ­¤æ—¶çš„
```
sayHi = function(){
 console.log(this);
 return ()=>{
  console.log(this);
 }
}
```
2. let fun1 = sayHi();fun1å˜é‡ç­‰äºsayHi()å‡½æ•°çš„è¿”å›å€¼ï¼Œåœ¨sayHi()æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå®ƒæ˜¯åœ¨å…¨å±€ç¯å¢ƒä¸­è¢«è°ƒç”¨çš„ï¼Œæ‰€ä»¥å…¶ä¸­çš„thisæŒ‡å‘windowå¯¹è±¡

3. fun1(),æ­¤æ—¶fun1æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œç»§æ‰¿äºåˆšæ‰çš„å¤–å±‚ï¼Œä¸ºwindow

4.let fun2 = sayHi.bind(obj)();æ­¤æ—¶fun2å˜é‡ç­‰äº sayHiä¸­çš„thisè¢«ç»‘å®šåˆ°objå¯¹è±¡åå¹¶æ‰§è¡Œçš„è¿”å›å€¼ï¼Œä¹Ÿå°±æ˜¯fun2ä¸ºï¼š
```
fun2 = () =>{
 console.log(this)
}
```
ç”±äºthisè¢«ç»‘å®šåˆ°äº†objå¯¹è±¡ä¸Šï¼Œæ‰€ä»¥fun2()ç®­å¤´å‡½æ•°ä¸­çš„thisç»§æ‰¿è‡ªä¸Šä¸€ä¸ªä»£ç åº“ï¼Œä¹Ÿå°±æŒ‡å‘äº†obj


# å…³äºthisçš„æ€»ç»“ï¼š

1. å½“å‡½æ•°åœ¨newä¸­è°ƒç”¨æ—¶ï¼Œthisç»‘å®šçš„ä¾¿æ˜¯æ–°å¯¹è±¡

2. å‡½æ•°æ˜¯å¦è¢«applyã€bindã€callç­‰æ˜¾å¼ç»‘å®šï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æŒ‡å‘ç»‘å®šçš„å¯¹è±¡

3. å‡½æ•°æ˜¯å¦è¢«éšå¼ç»‘å®šxxx.foo()ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™æŒ‡å‘æœ€æ·±å±‚çš„é‚£ä¸ªå¯¹è±¡

4.å¦‚æœéƒ½æ²¡æœ‰ï¼Œåˆ™ä¸ºé»˜è®¤ç»‘å®š

5.å¦‚æœç»™applyã€callã€bindä¼ å…¥çš„å‚æ•°æ˜¯nullæˆ–è€…undefinedï¼Œåˆ™æŒ‡å‘å…¨å±€å¯¹è±¡

6. å¦‚æœæ˜¯ç®­å¤´å‡½æ•°ï¼Œåˆ™ç»§æ‰¿çš„æ˜¯å¤–å±‚çš„this

# è¶…å¤§é¢˜åˆ†æï¼š
```
var number = 5;
var obj = {
    number: 3,
    fn: (function () {
        var number;
        this.number *= 2;
        number = number * 2;
        number = 3;
        return function () {
            var num = this.number;
            this.number *= 2;
            console.log(num);
            number *= 3;
            console.log(number);
        }
    })()
}
var myFun = obj.fn;
myFun.call(null);
obj.fn();
console.log(window.number);
```

ç¬¬ä¸€æ­¥ï¼šå°†obj.fnçš„æ‰§è¡Œç»“æœèµ‹å€¼ç»™myFunå˜é‡ï¼Œä½†æ˜¯è¯·æ³¨æ„ï¼šfnæ‰€å¯¹åº”çš„å±æ€§å€¼æ˜¯ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ï¼Œåœ¨å®šä¹‰çš„æ—¶å€™å°±å·²ç»æ‰§è¡Œäº†ï¼Œæ‰€ä»¥ï¼Œæ­¤å¤„çš„
```
myFun = function () {
            var num = this.number;
            this.number *= 2;
            console.log(num);
            number *= 3;
            console.log(number);
        }
```
è€Œä¸”ï¼Œè¯¥å‡½æ•°åœ¨æ‰§è¡Œæ—¶ï¼Œé‡‡ç”¨çš„æ˜¯é»˜è®¤ç»‘å®šï¼Œæ‰€ä»¥å¤–å±‚çš„thisæŒ‡å‘windowï¼Œè€Œä¸”è¿˜åœ¨å¤–å±‚å®šä¹‰äº†ä¸€ä¸ªå±€éƒ¨çš„numberå˜é‡ï¼Œç»“æœç­‰äº3ï¼Œè€Œç”±äºthisæŒ‡å‘window
ï¼Œå…¨å±€ç¯å¢ƒä¸‹çš„numberè¢«ä¿®æ”¹ä¸ºthis.number *=2;æ‰€ä»¥window.number =10;

ç¬¬äºŒæ­¥ï¼šmyFun.call(null);å°†myFunå‡½æ•°ç»‘å®šåˆ°äº†å…¨å±€ä½œç”¨åŸŸä¸Šï¼Œæ‰€ä»¥åœ¨myFunå‡½æ•°å†…çš„è¿ç®—è¿‡ç¨‹å¦‚ä¸‹
```
var num = window.number; //10;
window.number = 20; //window.numberå˜ä¸ºäº†20
console.log(num);  //10
number *=3 ;  //è¿™é‡Œçš„numberæŒ‡çš„æ˜¯å¤–å±‚å®šä¹‰çš„numberä¸º3ï¼Œæ‰€ä»¥è¿™é‡Œè®¡ç®—åçš„numberä¸º9
console.log(number); //è¿™é‡Œçš„numberä¸º
```

ç¬¬ä¸‰æ­¥ï¼šobj.fn()ï¼šæ‰§è¡Œobjå¯¹è±¡ä¸Šçš„fn()å‡½æ•°ï¼Œæ­¤æ—¶é‡‡ç”¨äº†éšå¼ç»‘å®šï¼Œå°†thisç»‘å®šåˆ°äº†objå¯¹è±¡ä¸Š,è¿ç®—è¿‡ç¨‹å¦‚ä¸‹:
```
var num = obj.number; //3
obj.number *=2; //objä¸Šçš„numberå˜ä¸º6
console.log(num); //3
number *=3 ;//æŒ‡çš„æ˜¯å¤–åŸçš„numberï¼Œåœ¨ç¬¬äºŒæ­¥ä¸­å·²ç»å˜ä¸º9ï¼Œæ‰€ä»¥è¿™é‡Œä¸º27
console.log(number);//27
```

ç¬¬å››æ­¥ï¼šè¾“å‡ºwindow.numberï¼Œç¬¬äºŒæ­¥ä¸­å·²ç»è¢«æ”¹ä¸º20ï¼Œæ‰€ä»¥æœ€ç»ˆç»“æœä¸º:

10

9

3

27

20

ğŸ˜¶ğŸ˜‘ğŸ˜”ğŸ˜²ğŸ˜€æˆ‘æ„Ÿè§‰æˆ‘ç–¯äº†ï¼Œå»åšè¿™é“é¢˜ï¼Œä½†æ˜¯æŒºçˆ½çš„ğŸš‘ğŸš‘ğŸš‘ğŸš‘ğŸš‘ğŸš‘ğŸš‘
